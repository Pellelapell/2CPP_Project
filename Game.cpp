#include "Game.hpp"
#include <random>
#include <algorithm>
#include <vector>
#include <string>
#include <iostream>

Game::Game(std::vector<class Player> players, int numPlayers)
{
    this->players = players;

    if (numPlayers > 4)
        this->size = 20;
    else
        this->size = 30;
}

Game::~Game() {}

std::vector<class Player> Game::getPlayers()
{
    return (players);
}

int Game::getSize()
{
    return (size);
}

void Game::initializeTiles()
{
    // Cette fonction doit :
    // - init le vector de tiles de la classe Game
    // - melanger les tiles ( donc random )
    // - mettre  le nombre demande de tiles (10.67)

    // remplis un vector avec toutes les tiles possibles
    // puis melange ce vector
    // puis prend le nombre de tiles necessaire pour la partie
    std::vector<std::vector<std::string>> tiles =
        {
            {"100", "111"},
            {"010", "010", "111"},
            {"010", "111", "010"},
            {"001", "111", "100"},
            {"010", "111"},
            {"11", "11"},
            {"101", "111"},
            {"111"},
            {"01", "11", "10"},
            {"10", "11"},
            {"001", "011", "110"},
            {"11"},
            {"01", "11", "10", "10", "11"},
            {"111", "100", "100", "100", "100"},
            {"00010", "00010", "00011", "01110", "11000"},
            {"001", "011", "110", "100"},
            {"010", "111", "110"},
            {"111"},
            {"10", "11", "10", "10"},
            {"011", "110", "110"},
            {"010", "110", "111"},
            {"010", "010", "111", "100"},
            {"10", "11"},
            {"11", "11", "11"},
            {"111", "010", "010", "010"},
            {"1000", "1100", "0110", "0011"},
            {"11111"},
            {"100", "111", "001", "001"},
            {"10", "11", "10", "11", "10"},
            {"10", "11", "11", "10"},
            {"010", "010", "010", "111", "101"},
            {"11"},
            {"1000", "1110", "1011"},
            {"01", "01", "11", "10", "10"},
            {"1100", "0100", "0111", "1100", "1000"},
            {"10", "10", "11", "10"},
            {"01", "11", "10"},
            {"1001", "1111"},
            {"0011", "1001", "1111"},
            {"1000", "1000", "1100", "0111"},
            {"110", "011", "110", "011", "010"},
            {"10", "11", "11"},
            {"0100", "0100", "1111"},
            {"11", "11"},
            {"01", "11", "111", "111", "10"},
            {"111", "010", "110"},
            {"1111"},
            {"010", "111"},
            {"1000", "1000", "1111"},
            {"0110", "1100", "0111"},
            {"01", "11", "10", "10"},
            {"100", "111"},
            {"10", "11", "10", "10", "10"},
            {"00111", "00100", "00100", "00100", "11100"},
            {"01", "01", "11", "10", "11", "10"},
            {"1111"},
            {"1100", "0100", "0111", "0001"},
            {"010", "010", "111", "010", "010"},
            {"001", "001", "111"},
            {"1", "1", "1", "1", "1", "1"},
            {"101", "111", "010", "110"},
            {"0010", "1110", "0111", "0100"},
            {"011", "010", "010", "111"},
            {"10", "10", "11", "10", "10"},
            {"1100", "0100", "0101", "1111"},
            {"001", "011", "110", "100", "110"},
            {"011", "010", "010", "010", "110", "100"},
            {"1010", "1111"},
            {"1100", "0101", "0101", "0111"},
            {"10", "11", "10", "10", "10"},
            {"1000", "1010", "1111", "0100", "0100"},
            {"11", "10", "10", "10", "10", "10", "10"},
            {"010", "111", "100", "100"},
            {"11"},
            {"001", "101", "111"},
            {"010", "111", "101"},
            {"00100", "00100", "11111", "00100", "00100"},
            {"0001", "0011", "0010", "0010", "0110", "1100"},
            {"11", "10", "11", "10", "11"},
            {"0100", "0100", "0100", "1111", "0100"},
            {"01", "11", "10", "10", "10"},
            {"011", "010", "110", "100"},
            {"011", "010", "110", "011", "010", "010"},
            {"110", "110", "011", "010", "010", "010"},
            {"010", "011", "110", "010"},
            {"1100", "1111"},
            {"0011", "1110", "1000", "1100"},
            {"011", "010", "010", "110"},
            {"010", "010", "111", "010"},
            {"111", "101", "100", "110"},
            {"010", "011", "110", "100"},
            {"100", "110", "111"},
            {"10", "10", "10", "11"},
            {"0100", "1111", "1000"},
            {"011", "110", "100", "100"},
            {"01", "11", "10", "11"}};
    std::random_device rd;
    std::mt19937 g(rd());

    std::shuffle(tiles.begin(), tiles.end(), g);
    int tilesToPick;
    int numPlayers = players.size();
    double ratio = 10.67;
    tilesToPick = static_cast<int>(std::ceil(numPlayers * ratio));
    tiles.resize(tilesToPick);
    for (size_t i = 0; i < tiles.size(); ++i)
    {
        std::cout << "Tile #" << i << ":\n";
        for (const auto &row : tiles[i])
        {
            std::cout << row << '\n';
        }
        std::cout << '\n';
    }
}
